{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,yCAQA,IAAIC,EAAa,EACbC,EAAW,EAEf,MAAMC,EAASC,SAASC,cAAc,gBAChCC,EAAUF,SAASC,cAAc,SACjCE,EAAYH,SAASC,cAAc,YACnCG,EAAgBJ,SAASC,cAAc,cAuD7CI,eAAeC,IACX,MAAMC,EAAYL,EAAQM,MAE1BV,GAAYH,EAAAc,KACZZ,GAAcF,EAAAe,SAEdN,EAAcO,UAAUC,IAAI,mBAE5B,IACI,MAAMC,QAA4B,EAAAlB,EAAAmB,aAAYP,EAAWT,GACnDiB,EAAiBF,EAAoBG,KAG3C,GAF0BH,EAAoBI,WAErBpB,EAUrB,OATAqB,EAAAC,GAASC,OAAOC,KACZ,8DAGJC,EAA4BP,GAE5BX,EAAcO,UAAUC,IAAI,wBAC5BR,EAAcmB,oBAAoB,QAASjB,GAK/CgB,EAA4BP,GAE5BX,EAAcO,UAAUa,OAAO,kB,CACjC,MAAOC,GACLC,QAAQC,IAAIF,EAAMG,Q,EAI1B,SAASC,EAAgBC,GACrB,MAAMC,EAASD,EACVE,KAAIC,IACD,MAAMC,aACFA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,GACAP,EAEJ,MAAO,yDACWE,wBACZD,WAAsBE,sHAGnBC,8DAGAC,iEAGGC,kEAGCC,6CAIhB,IAEAC,KAAK,IAEVtC,EAAUuC,mBAAmB,YAAaX,E,CAa9C,SAAST,EAA4BP,GACjCc,EAAgBd,GAXpB,WACI,MAAM4B,EACFxC,EAAUyC,kBAAkBC,wBAAwBC,OAExDC,OAAOC,SAAS,CACZC,IAA4B,EAAvBN,EACLO,SAAU,U,CAMdC,GAEgB,IAAIjC,EAAAkC,GAAJ,CAAmB,cAC3BC,S,CA5IZtD,EAAOuD,iBAAiB,UAExBjD,eAA4BkD,GACxBA,EAAMC,iBACNrD,EAAUsD,UAAY,GACtB5D,EAAa,EACbO,EAAcO,UAAUC,IAAI,mBAE5B,MAAM8C,EAAaH,EAAMI,cAAcC,SAASC,WAAWrD,MAAMsD,OAEjE,IACI,MAAMC,QAAqB,EAAApE,EAAAmB,aAAY4C,GACjC5B,EAAciC,EAAa/C,KAC3BgD,EAAsBD,EAAa9C,UAEzC,GAA2B,IAAvBa,EAAYmC,OACZ/C,EAAAC,GAASC,OAAO8C,QACZ,gFAED,IAAmB,KAAfR,EACP,OAEAxC,EAAAC,GAASC,OAAO+C,QACZ,oBAAoBH,YACpB,CACII,QAAS,IACTC,SAAU,aAIlBxC,EAAgBC,GACC,IAAIZ,EAAAkC,GAAJ,CAAmB,aAAc,C,GAKlD,GAAIY,EAAsBrE,EAAAe,UAAY,EAElC,YADAN,EAAcO,UAAUC,IAAI,mBAIhCf,EAAaF,EAAAe,SACbZ,EAAWH,EAAAc,KAEXL,EAAcO,UAAUa,OAAO,mBAE/BpB,EAAckD,iBAAiB,QAAShD,E,EAE9C,MAAOmB,GACLC,QAAQC,IAAIF,EAAMG,Q","sources":["src/index.js"],"sourcesContent":["import { per_page, page, fetchImages } from './fetch_images';\nimport './css/styles.css';\nimport Notiflix from 'notiflix';\nimport axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet sumPerPage = 0;\nlet nextPage = 0;\n\nconst formEl = document.querySelector('#search-form');\nconst inputEl = document.querySelector('input');\nconst galleryEl = document.querySelector('.gallery');\nconst btnLoadMoreEl = document.querySelector('.load-more');\n\nformEl.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(event) {\n    event.preventDefault();\n    galleryEl.innerHTML = '';\n    sumPerPage = 0;\n    btnLoadMoreEl.classList.add('visually-hidden');\n\n    const inputValue = event.currentTarget.elements.safesearch.value.trim();\n\n    try {\n        const dataOfImages = await fetchImages(inputValue);\n        const arrayImages = dataOfImages.hits;\n        const totalQuantityImages = dataOfImages.totalHits;\n\n        if (arrayImages.length === 0) {\n            Notiflix.Notify.failure(\n                'Sorry, there are no images matching your search query. Please try again.'\n            );\n        } else if (inputValue === '') {\n            return;\n        } else {\n            Notiflix.Notify.success(\n                `Hooray! We found ${totalQuantityImages} images.`,\n                {\n                    timeout: 3000,\n                    position: 'left-top',\n                }\n            );\n\n            renderPhotoCard(arrayImages);\n            const lightbox = new SimpleLightbox('.gallery a', {\n                /* options */\n            });\n\n\n            if (totalQuantityImages / per_page <= 1) {\n                btnLoadMoreEl.classList.add('visually-hidden');\n                return;\n            }\n\n            sumPerPage = per_page;\n            nextPage = page;\n\n            btnLoadMoreEl.classList.remove('visually-hidden');\n\n            btnLoadMoreEl.addEventListener('click', onbtnLoadMoreEl);\n        }\n    } catch (error) {\n        console.log(error.message);\n    }\n}\n\nasync function onbtnLoadMoreEl() {\n    const dataInput = inputEl.value;\n\n    nextPage += page;\n    sumPerPage += per_page;\n\n    btnLoadMoreEl.classList.add('visually-hidden');\n\n    try {\n        const newPagedataOfImages = await fetchImages(dataInput, nextPage);\n        const newArrayImages = newPagedataOfImages.hits;\n        const maxQuantityImages = newPagedataOfImages.totalHits;\n\n        if (maxQuantityImages <= sumPerPage) {\n            Notiflix.Notify.info(\n                \"We're sorry, but you've reached the end of search results.\"\n            );\n\n            renderMarkupAndSmoothScroll(newArrayImages);\n\n            btnLoadMoreEl.classList.add('visually-hidden');\n            btnLoadMoreEl.removeEventListener('click', onbtnLoadMoreEl);\n\n            return;\n        }\n\n        renderMarkupAndSmoothScroll(newArrayImages);\n\n        btnLoadMoreEl.classList.remove('visually-hidden');\n    } catch (error) {\n        console.log(error.message);\n    }\n}\n\nfunction renderPhotoCard(arrayImages) {\n    const markup = arrayImages\n        .map(img => {\n            const {\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            } = img;\n\n            return `<div class=\"photo-card\">\n      <a class='link' href=\"${largeImageURL}\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width='200' height='140' />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes</b> ${likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views</b> ${views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments</b> ${comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads</b> ${downloads}\n    </p>\n  </div>\n      </a>\n  </div>`;\n        })\n        .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction smoothScroll() {\n    const positionCardToScroll =\n        galleryEl.firstElementChild.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: positionCardToScroll * 2,\n        behavior: 'smooth',\n    });\n}\n\nfunction renderMarkupAndSmoothScroll(newArrayImages) {\n    renderPhotoCard(newArrayImages);\n    smoothScroll();\n\n    const gallery = new SimpleLightbox('.gallery a');\n    gallery.refresh();\n}"],"names":["$81RIQ","parcelRequire","$1f0dc3b9307be026$var$sumPerPage","$1f0dc3b9307be026$var$nextPage","$1f0dc3b9307be026$var$formEl","document","querySelector","$1f0dc3b9307be026$var$inputEl","$1f0dc3b9307be026$var$galleryEl","$1f0dc3b9307be026$var$btnLoadMoreEl","async","$1f0dc3b9307be026$var$onbtnLoadMoreEl","dataInput","value","page","per_page","classList","add","newPagedataOfImages","fetchImages","newArrayImages","hits","totalHits","$parcel$interopDefault","$eWCmQ","Notify","info","$1f0dc3b9307be026$var$renderMarkupAndSmoothScroll","removeEventListener","remove","error","console","log","message","$1f0dc3b9307be026$var$renderPhotoCard","arrayImages","markup","map","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","positionCardToScroll","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","$1f0dc3b9307be026$var$smoothScroll","$fZKcF","refresh","addEventListener","event","preventDefault","innerHTML","inputValue","currentTarget","elements","safesearch","trim","dataOfImages","totalQuantityImages","length","failure","success","timeout","position"],"version":3,"file":"index.4383c4f6.js.map"}